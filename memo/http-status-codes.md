# HTTP ステータスコード チートシート (業務でよく使うもの)

HTTP ステータスコードは、クライアントからのリクエストに対してサーバーがどのような結果を返したかを示す 3 桁の数字です。カテゴリーごとに分類されており、業務で特に頻繁に遭遇するものをまとめました。

---

## 2xx: 成功 (Success)

リクエストが成功したことを示します。

- `200 OK`

  - **意味**: リクエストは成功しました。
  - **主な用途**:
    - GET: データが正常に取得できた。 (例: ユーザー情報の一覧表示)
    - PUT/PATCH: データが正常に更新できた。
    - POST: 処理が成功した。(ただし、リソース作成時は `201 Created` の方が適切な場合も)

- `201 Created`

  - **意味**: リクエストが成功し、新しいリソースが作成されました。
  - **主な用途**:
    - POST: 新しいユーザーの作成、新しい投稿の作成など、リソースが新しく作られた場合に返します。レスポンスの `Location` ヘッダーに、作成されたリソースの URL を含めるのが一般的です。

- `204 No Content`
  - **意味**: リクエストは成功しましたが、返すコンテンツはありません。
  - **主な用途**:
    - DELETE: リソースの削除が成功した場合など。クライアントは特にレスポンスボディを必要としないため、通信量を削減できます。

---

## 4xx: クライアントエラー (Client Error)

クライアント側の原因でリクエストが処理できなかったことを示します。

- `400 Bad Request`

  - **意味**: リクエストが不正です。
  - **主な用途**:
    - **バリデーションエラー**: リクエストボディの形式が違う、必須パラメータが欠けている、パラメータの型が違うなど、サーバーが理解できないリクエストに対して返します。エラーの詳細をレスポンスボディに含めるのが親切です。
    - 例: `{"errors": ["email is required", "password must be at least 8 characters"]}`

- `401 Unauthorized`

  - **意味**: **認証エラー**。あなたは誰ですか？
  - **主な用途**:
    - ログインしていないユーザーが、ログイン必須のページにアクセスしようとした場合。
    - リクエストに有効な認証トークン（API キー、JWT など）が含まれていない場合。
    - **注意**: "Unauthorized" (権限がない) という名前ですが、実際には「未認証 (Unauthenticated)」を意味します。

- `403 Forbidden`

  - **意味**: **認可エラー**。アクセスは禁止されています。
  - **主な用途**:
    - ログインはしているが、そのリソースにアクセスする**権限**がない場合。
    - 例: 一般ユーザーが管理者専用ページにアクセスしようとした場合。
    - `401` との違い: `401`は「あなたは誰？」、`403`は「あなたが誰かは分かったが、あなたにその権限はない」という違いです。

- `404 Not Found`

  - **意味**: リクエストされたリソースが見つかりません。
  - **主な用途**:
    - 存在しない URL (エンドポイント) にアクセスした場合。
    - `GET /users/9999` のように、存在しない ID のリソースを要求した場合。

- `409 Conflict`
  - **意味**: リクエストが現在のリソースの状態と競合しました。
  - **主な用途**:
    - 一意であるべきデータ (例: メールアドレス) を登録しようとした際に、すでに存在していた場合。

---

## 5xx: サーバーエラー (Server Error)

サーバー側の原因でリクエストが処理できなかったことを示します。

- `500 Internal Server Error`

  - **意味**: サーバー内部で予期せぬエラーが発生しました。
  - **主な用途**:
    - サーバー側のコードのバグ、データベース接続の失敗など、クライアントのリクエストに問題はないが、サーバー側で何らかの問題が発生した場合に使われる、汎用的なエラーコードです。
    - **注意**: ユーザーに詳細なエラー情報（スタックトレースなど）を見せるべきではありません。ログには詳細を記録し、ユーザーには汎用的なエラーメッセージを返しましょう。

- `503 Service Unavailable`
  - **意味**: サービスが利用できません。
  - **主な用途**:
    - サーバーがメンテナンス中であったり、過負荷でリクエストを処理できない場合。
